{
    "$schema": "https://raw.githubusercontent.com/lukesampson/scoop/master/schema.json",
    "homepage": "https://www.gnu.org/software/emacs/",
    "license": "GPL-3.0-only",
    "version": "28.0.50-snapshot-feature_dll-only-windows-2021-01-09",
    "architecture": {
        "64bit": {
            "url": "https://alpha.gnu.org/gnu/emacs/pretest/windows/emacs-28/emacs-28.0.50-snapshot-feature_dll-only-windows-2021-01-09-x86_64.zip",
            "hash": "84cf26405ee65f4c6b122bf8d74878790d5dc882d49847dcba4f4de0d28ec96d"
        },
        "32bit": {
            "url": "https://alpha.gnu.org/gnu/emacs/pretest/windows/emacs-28/emacs-28.0.50-snapshot-feature_dll-only-windows-2021-01-09-i686.zip",
            "hash": "34abf6748181408ed20b2ad69ca4e4b84e840f64919a898de42b66a287efb615"
        }
    },
    "env_set": {
        "EMACS_DIR": "$dir"
    },
    "bin": [
        "bin\\runemacs.exe",
        "bin\\emacs.exe",
        "bin\\emacsclient.exe",
        "bin\\emacsclientw.exe",
        "bin\\etags.exe",
        "bin\\ctags.exe",
        [
            "bin\\emacsclientw.exe",
            "emw",
            "-c -n -a \"\""
        ]
    ],
    "checkver": {
        "url": "https://alpha.gnu.org/gnu/emacs/pretest/windows/emacs-$majorVersion/",
        "re": "emacs-([\\d\\w.-]+)-x86_64.zip",
        "reverse": true
    },
    "depends": [
        "zstd",
        "7zip"
    ],
    "post_install": [
        "if ($architecture -eq \"64bit\") {",
        "    Push-Location \"$dir\"",
        "    curl.exe -O 'http://repo.msys2.org/mingw/x86_64/mingw-w64-x86_64-glib2-2.64.2-1-any.pkg.tar.xz'",
        "    7z x mingw-w64-x86_64-glib2-2.64.2-1-any.pkg.tar.xz -y",
        "    tar -xf mingw-w64-x86_64-glib2-2.64.2-1-any.pkg.tar",
        "    curl.exe -O 'http://repo.msys2.org/mingw/x86_64/mingw-w64-x86_64-pcre-8.44-1-any.pkg.tar.xz'",
        "    7z x mingw-w64-x86_64-pcre-8.44-1-any.pkg.tar.xz -y",
        "    tar -xf mingw-w64-x86_64-pcre-8.44-1-any.pkg.tar",
        "    curl.exe -O 'http://repo.msys2.org/mingw/x86_64/mingw-w64-x86_64-jansson-2.12-1-any.pkg.tar.xz'",
        "    7z x mingw-w64-x86_64-jansson-2.12-1-any.pkg.tar.xz -y",
        "    tar -xf mingw-w64-x86_64-jansson-2.12-1-any.pkg.tar",
        "    xcopy mingw64\\bin\\lib*.dll bin\\* /y /d",
        "    Pop-Location",
        "}"
    ],
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://alpha.gnu.org/gnu/emacs/pretest/windows/emacs-$majorVersion/emacs-$version-x86_64.zip"
            },
            "32bit": {
                "url": "https://alpha.gnu.org/gnu/emacs/pretest/windows/emacs-$majorVersion/emacs-$version-i686.zip"
            }
        }
    },
    "shortcuts": [
        [
            "bin\\runemacs.exe",
            "Emacs"
        ],
        [
            "bin\\emacsclientw.exe",
            "Emacs Client",
            "-c -n -a \"\""
        ]
    ]
}
